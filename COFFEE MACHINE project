MENU = {
    "espresso": {
        "ingredients": {
            "water": 50,
            "coffee": 18,
        },
        "cost": 1.5,
    },
    "latte": {
        "ingredients": {
            "water": 200,
            "milk": 150,
            "coffee": 24,
        },
        "cost": 2.5,
    },
    "cappuccino": {
        "ingredients": {
            "water": 250,
            "milk": 100,
            "coffee": 24,
        },
        "cost": 3.0,
    }
}

resources = {
    "water": 300,
    "milk": 200,
    "coffee": 100,
}

# TODO: 1. Print report of all coffee machine resources (water, milk, cofee, money)
# TODO: 2. ask user what coffee they would like, check if enough resources to make else print not enough {resources}
# TODO: 3. ask user to insert coins , quater dimes nickle pennies, check if enough given.
# TODO: 4. tag the coffee to their value and return change accordingly
# TODO: 5. Make coffee
# TODO: 6. reduce/add resources accordingly


quarter = 0.25
dimes = 0.10
nickles = 0.05
pennies = 0.01

water = resources["water"]
milk = resources["milk"]
coffee = resources['coffee']
money = 0
machine_on = True
def report():
    """ This is to format data and to print balance resources"""
    print(f"Water: {water}")
    print(f"Milk: {milk}")
    print(f"Coffee: {coffee}")
    print(f"Money: ${money}")

def check_latte_cappucino(choice):
    """This code is to check if ingredient is sufficient"""

    choice_water = MENU[choice]["ingredients"]["water"]
    choice_coffee = MENU[choice]["ingredients"]["coffee"]
    choice_milk = MENU[choice]["ingredients"]["milk"]

    if water > choice_water and milk > choice_milk and coffee > choice_coffee:
        return True
    elif water < choice_water:
        return "Sorry there is not enough water"
    elif milk < choice_milk:
        return "Sorry there is not enough milk"
    elif coffee < choice_coffee:
        return "Sorry there is not enough coffee"


def check_espresso(choice):

    choice_water = MENU[choice]["ingredients"]["water"]
    choice_coffee = MENU[choice]["ingredients"]["coffee"]

    if water > choice_water and coffee > choice_coffee:
        return True
    elif water < choice_water:
        return "Sorry there is not enough water"
    elif coffee < choice_coffee:
        return "Sorry there is not enough coffee"

def total():
    """to calculate total coins inserted into machine"""
    print("Please insert coins.")
    total_quarter = int(input("How many quarters?: ")) * 0.25
    total_dimes = int(input("How many dimes?: ")) * 0.10
    total_nickles = int(input("How many nickles?: ")) * 0.05
    total_pennies = int(input("How many pennies?: ")) *  0.01

    total_inserted = total_quarter + total_dimes + total_nickles + total_pennies
    return total_inserted

def choice_cost(choice):
    """to get cost of the chosen coffee"""
    return MENU[choice]["cost"]


while machine_on:
    choice = (input("What would you like? (espresso/latte/cappuccino)")).lower()

    if choice == "report":
        report()
    elif choice == "off":
        machine_on = False
        print("Machine Off")
    elif choice == "latte" or choice == "cappuccino":
        check_resource = check_latte_cappucino(choice)
        if check_resource == True:
            total_inserted = total()
            cost = choice_cost(choice)
            balance = round(total_inserted - cost,2)
            if balance >= 0 and choice == "latte":
                money += cost
                water -= 200
                milk -= 150
                coffee -= 24
                print (f"Here is ${balance} in change.")
                print (f"Here is your {choice}. Enjoy!")
            elif balance >= 0 and choice == "cappuccino":

                money += cost
                water -= 250
                milk -= 100
                coffee -= 24
            else:
                print("Sorry that's not enough money. Money refunded.")

        else:
            fail = check_latte_cappucino(choice)
            print(fail)
    elif choice == "espresso":
            check_espresso = check_espresso(choice)
            if check_espresso == True:
                total_inserted = total()
                cost = choice_cost(choice)
                balance = round(total_inserted - cost, 2)
                if balance >= 0:
                    money += cost
                    water -= 50
                    coffee -= 18
                    print(f"Here is ${balance} in change.")
                    print(f"Here is your {choice}. Enjoy!")
                else:
                    print("Sorry that's not enough money. Money refunded.")

            else:
                fail = check_espresso(choice)
                print(fail)
    else:
        print ("please re-input")


